<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<body>

    <h1>Edit user:</h1>

    <p th:each="error: ${#fields.errors('user')}" th:text="${error}">user error</p>
    <div th:if="${errorMessage}">
        <p th:text="${errorMessage}">user error</p>
    </div>
    
    <h3 th:text="${caption}">Caption</h3>
    <br>

    <form action="/editUser" th:object="${user}" method="POST" enctype="utf8">

        <input type="hidden" id="id" th:field="*{id}" />

        <div>
            <label for="login"> login: </label>
            <input type="text" id="login" th:field="*{login}" />
            <p th:each="error: ${#fields.errors('login')}" th:text="${error}">Validation error</p>
        </div>

        <div>
            <label for="name"> name: </label>
            <input type="text" id="name" th:field="*{name}" />
            <p th:each="error : ${#fields.errors('name')}" th:text="${error}">Validation error</p>
        </div>

        <div>
            <label for="password"> new password: </label>
            <input type="password" id="password" th:field="*{password}" />
            <p th:each="error : ${#fields.errors('password')}" th:text="${error}">Validation error</p>
        </div>

        <div>
            <div>Roles: </div>
            <div th:each="role : ${allRoles}" >
                <input  type="checkbox" 
                        th:id="'role' + ${role.name}"
                        th:field="*{roles}" 
                        th:value="${role.name}" 
                        th:checked="${user.hasRole(role)}" />
                <label th:for="'role' + ${role.name}" th:text="${role.name}"> ... </label>
            </div>
        </div>

        <button type="submit">submit</button>
    </form>

</body>
</html>
